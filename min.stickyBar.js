!function(o){o.fn.stickyBar=function(t){var s=o.extend({view:window,modClass:"sticky",offset:{top:0,bottom:0}},t),e=o(s.view),i=s.view==window,f=e.scrollTop(),a=this;if(a.length>0){var l=a.parent().offset().top-(i?0:e.offset().top);a.addClass(s.modClass),a.css("position","sticky"),e.scroll(function(t){var p=e.height(),c=a.outerHeight(),r=Math.floor(e.scrollTop()),n=Math.floor(r+p),h=a.position().top+l,d=Math.floor(h+c),v=Math.abs(p-c),w=f-r,m=r>f,u=h>=r&&!m;if(d<=n&&m)p>c?a.css("top",s.offset.top):a.css("top",-v-s.offset.bottom);else if(u)a.css("top",s.offset.top);else if(a.hasClass(s.modClass)){var g=-v,C=parseInt(a.css("top"),10)+w,y=r+p>=(i?o(document).height():e.prop("scrollHeight"))?g:C;a.css("top",y)}f=r,m})}}}(jQuery);